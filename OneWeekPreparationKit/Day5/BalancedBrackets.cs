using System;
using System.Collections;
using System.Collections.Generic;
using System.Text;

namespace HackerRank.OneWeekPreparationKit.Day5
{
    public static class BalancedBrackets
    {
        public static void Run()
        {
            foreach (var test in TestCases())
            {
                Console.WriteLine(isBalanced(test));
            }
        }

        public static string isBalanced(string s)
        {
            var stack = new Stack<char>();

            foreach (var c in s)
            {
                if (IsOpeningBracket(c))
                {
                    stack.Push(c);
                }
                else if (IsClosingBracket(c))
                {
                    if (stack.Count == 0)
                    {
                        return "NO";
                    }

                    var openingBracket = GetMatchingBracket(c);
                    var lastOpeningBracket = stack.Pop();

                    if (lastOpeningBracket != openingBracket)
                    {
                        return "NO";
                    }
                }
            }

            return stack.Count == 0 ? "YES" : "NO";
        }

        private static bool IsOpeningBracket(char c)
        {
            return c == '(' || c == '[' || c == '{';
        }

        private static bool IsClosingBracket(char c)
        {
            return c == ')' || c == ']' || c == '}';
        }

        private static char GetMatchingBracket(char c)
        {
            switch (c)
            {
                case ')':
                    return '(';
                case ']':
                    return '[';
                case '}':
                    return '{';
                default:
                    throw new ArgumentException(c.ToString());
            }
        }

        public static IEnumerable<string> TestCases()
        {
            return new[]
            {
                //"{[()]}",
                //"{[(])}",
                //"{{[[(())]]}}",
                //"[()][{}()][](){}([{}(())([[{}]])][])[]([][])(){}{{}{[](){}}}()[]({})[{}{{}([{}][])}]",
                //"[()][{}[{}[{}]]][]{}[]{}[]{{}({}(){({{}{}[([[]][[]])()]})({}{{}})})}",
                //"(])[{{{][)[)])(]){(}))[{(})][[{)(}){[(]})[[{}(])}({)(}[[()}{}}]{}{}}()}{({}](]{{[}}(([{]",
                //"){[]()})}}]{}[}}})}{]{](]](()][{))])(}]}))(}[}{{)}{[[}[]",
                //"}(]}){",
                //"((]()(]([({]}({[)){}}[}({[{])(]{()[]}}{)}}]]{({)[}{(",
                //"{}{({{}})}[][{{}}]{}{}(){{}[]}{}([[][{}]]())",
                //"(){}[()[][]]{}(())()[[([])][()]{}{}(({}[]()))()[()[{()}]][]]",
                //"()([]({}[]){}){}{()}[]{}[]()(()([[]]()))()()()[]()(){{}}()({[{}][]}[[{{}({({({})})})}]])",
                //"[]([{][][)(])}()([}[}(})}])}))]](}{}})[]({{}}))[])(}}[[{]{}]()[(][])}({]{}[[))[[}[}{(]})()){{(]]){][",
                //"{()({}[[{}]]()(){[{{}{[[{}]{}((({[]}{}()[])))]((()()))}(()[[[]]])((()[[](({([])()}))[]]))}]})}",
                //"()(){{}}[()()]{}{}",
                //"{}()([[]])({}){({[][[][[()]]{{}[[]()]}]})}[](())((())[{{}}])",
                //"{}(((){}){[]{{()()}}()})[]{{()}{(){()(){}}}}{()}({()(()({}{}()((()((([])){[][{()}{}]})))))})",
                //"][[{)())))}[)}}}}[{){}()]([][]){{{{{[)}]]{([{)()][({}[){]({{",
                "{{}(",
                //"{[{((({}{({({()})()})[]({()[[][][]]}){}}))){}}]}{}{({((){{}[][]{}[][]{}}[{}])(())}[][])}",
                //"()[[][()[]][]()](([[[(){()[[]](([]))}]]]))",
                //"()[]({}{})(()){{{}}()()}({[]()}())[](){}(({()}[{}[{({{}}){({}){({})((({()})))}}}]]))",
                //"}[{){({}({)})]([}{[}}{[(([])[(}){[]])([]]}(]]]]{][",
                //"[{]{[{(){[}{}(([(]}])(){[[}(]){(})))}}{{)}}{}][({(}))]}({)",
                //")})[(]{][[())]{[]{{}}[)[)}[]){}](}({](}}}[}{({()]]",
                //"[[[({[]}({[][[[[][[{(()[][])}()[][]][]{}]]]]}))][(()){}]]]()[{}([]{}){}{{}}]",
                //"({[]({[]})}())[][{}[{{(({{{([{}])}}}))}}]]",
                //"([((()))()])[][][]{}()(([]))[]()[]((){}[]){}(){{}[]}[[{[]}]]",
                //"[[(((({}{[]{}()}){}{{}}){({[]{[{}]{(){}(((){()}))}()}}[[]]()()[()])[[{}{}]()]}))]]{}[]{}({({{}})})",
                //"(]{()}((",
                //"[][(())[({{{()[]}}{[[][[][[[]{{{[()]{{{{}{[]}[][]}}}}}}]]]]}})]]",
                //"}[})})}[)]{}{)",
                //"({(}{})))}(}[)[}{)}}[)[{][{(}{{}]({}{[(})[{[({{[}{(]]})}",
                //"]}})[]))]{][])[}(])]({[]}[]([)",
                //"[{{}{[{{[}[[}([]",
                //"[([]){}][({})({[(([])[][])][[{}{([{{}{(()){{{({}{{}}())}}[]}}()[()[{{{([](()){[[[]]]})}}}]]}])}]]})]",
                //"]{}{(}))}](})[{]]()(]([}]([}][}{]{[])}{{{]([][()){{})[{({{{[}{}](]}}",
                //"{[{}}){(}[][)(}[}][)({[[{]}[(()[}}){}{)([)]}(()))]{)(}}}][",
                //"(]{}{(}}}[)[",
                //"[]{}{[[]]}([{}]{}[]){{(())}}",
                //"[)([{(][(){)[)}{)]]}}([((][[}}(]{}]]}]][(({{{))[[){}{]][))[]{]][)[{{}{()]){)])))){{{[(]}[}}{}]",
                //"{({(){[[[][]{}[[([]{})]{}]][[]()()]]}})}[{}{{}}]",
                //")}][(})){))[{}[}",
                //"{[]{({]}[}}[{([([)([){{}{(}}[]}}[[{[}[[()(])[}[]",
                //"()()()[]",
                //"((){}])][]][}{]{)]]}][{]}[)(])[}[({(",
                //")[((])(]]]]((]){{{{())]}]}(}{([}(({}]])[[{){[}]{{}})[){(",
                //"}][[{[((}{[]){}}[[[)({[)}]]}(]]{[)[]}{}(){}}][{()]))})]][(((}}",
                //"([]){}{{}{}}()([([{}{[[]()([(([]()))()[[]]])]}])])",
                //"[()[[]{{[]}()([])}[]][][]][]()[]{}{}[][]{}{}[()(){}]",
                //"{[{){]({(((({](]{([])([{{([])[}(){(]](]{[{[]}}())[){})}))[{})))[",
                //"{}[()[]][]{}{}[[{{[[({})]()[[()]]]}}]]",
                //"{[{}[][]]}[((()))][]({})[]{}{()}",
                //"(){[{({})}]}",
                //"([]])][{)]({)[]))}]())[}]))][}{(}}})){]}]{[)}(][})[[",
                //"((({{}(([{}(())]))[()]{[[[]()]]}})))",
                //"}()))}(}]]{{})}][{](]][{]{[[]]]}]]}([)({([))[[(]}])}[}(([{)[)]]([[](]}]}{]{{})[]){]}{])(",
                //"{}{}{}{[[()]][]}",
                //")]}]({{})[[[{]{{{}}][))]{{",
                //"))){({}])}])}}]{)()(}(]}([",
                //"([[]][])[[]()][]()(([[]]{[()[]{[][{}]}[()]]{}{[]}}{{}()}(()[([][]{})[[{}][]]{}[]])))",
                //"(]{[({}[){)))}]{[{}][({[({[]))}[}]}{()(([]{]()}})}[]{[)](((]]])([]}}]){)(([]]}[[}[",
                //"([[]])({}(([(){{}[{}]}]){[{}]}))[][{}{}](){}",
                //"[][][][][][([])][]{({()}[[()()]{([(){[]{}}{(())}{[](){}()({}())}[({}[[]()])][]])}])}",
                //"}[{{(}})}}(((())()({]{([]((][(({)[({[]]}[])}]{][{{}]{)][}(])}}}))}}}",
                //"[]({})()[]{}{}[]({}{})[]{([])()[()][{()({})[{}{[[()]{}[]][]}(({{[]{()()()}{}[]()}[]}){{}{}})]}]}",
                //"{{(([{)]{}({][{](){({([[[][)}[)})(",
                //"[{}]{[()({[{}]})]}",
                //"[[{}]]",
                //"]{{({[{]}[[)]]}{}))}{){({]]}{]([)({{[]){)]{}){){}()})(]]{{])(])[]}][[()()}",
                //"{[([}[[{{(]]][}()())]{){(){)]]){})}]{][][(}[]())[}[)})})[][{[)[})()][]))}[[}",
                //"]()])}[}}}{]]{)[}(}]]])])}{(}{([{]({)]}])(})[{}[)]])]}[]{{)){}{()}]}((}}{({])[}])[]}",
                //"(]}[{}{{][}))){{{([)([[])([]{[",
                //"{(()[]){}}(){[]}({{}(()())})([]){}{}(())()[()]{}()",
                //"{{}[{}[{}[]]]}{}({{[]}})[[(){}][]]{}(([]{[][]()()}{{{()()}{[]}({}[]{()})}{()}[[]][()]}))",
                //"{[][]}[{}[](){}]{{}{[][{}]}}",
                //"()(){}(){((){}[])([[]]())}",
                //"{}[[{[((}[(}[[]{{]([(}]][[",
                //"{}[([{[{{}()}]{}}([[{}[]]({}{{()}[][][]})])])]",
                //"{[](}([)(])[]]})()]){[({]}{{{)({}(][{{[}}(]{",
                //"[][]{{}[](())}{}({[()]}())[][[][({}([{}]))]]",
                //"((()))[]{[(()({[()({[]}{})]}))]}{[]}{{({}{})[{}{}]{()([()])[{()}()[[]{}()]{}{}[]()]}[[]{[]}([])]}}"
            };
        }
    }
}
